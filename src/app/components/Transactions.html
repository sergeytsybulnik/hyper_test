<header-component></header-component>

<div class="wrapper">

  <div class="panel panel-warning" ng-show="$ctrl.errorPresent" style="width: 40%;text-align: center">
    <div class="panel-heading">
      <h3 class="panel-title">Warning!</h3>
    </div>
    <div class="panel-body">
      {{$ctrl.errorMessage}}
    </div>
    <div class="panel-footer">
      <div class="header__user_btn header__user_btn_warning">
        Refresh
      </div>
    </div>
  </div>

  <div class="accounts__container" ng-show="!$ctrl.errorPresent">
    <div class="accounts__title">
      <h1 class="accounts__title_text">Transactions</h1>
      <div class="accounts__title_status">
        <div>
          <div style="text-decoration: underline">Current account state</div>
          <div>Amount: {{userAccountTransactions.accountState.amount}}</div>
          <div>Currency: {{userAccountTransactions.accountState.currency}}</div>
        </div>
      </div>
    </div>

    <table ng-table="tableParams" show-filter="true"
           class="table table-condensed table-bordered">
      <thead>
      <tr>
        <th rowspan="3">ID</th>
        <th colspan="5">Transfer</th>
        <th rowspan="3">Time</th>
        <th rowspan="3">Status</th>
        <th colspan="3">Account State</th>
      </tr>
      <tr>
        <th colspan="2">Counterparty</th>
        <th rowspan="2">Amount</th>
        <th rowspan="2">Currency</th>
        <th rowspan="2">Type</th>
        <th rowspan="2">Amount</th>
        <th rowspan="2">Currency</th>
      </tr>
      <tr>
        <th>Bic</th>
        <th>Account</th>
      </tr>
      </thead>
      <tbody>
        <tr ng-repeat="row in $data" ng-click="$ctrl.selectItem(row)" ng-class="{'table-row-selected': row.$selectedItem === true}">
          <td sortable="'id'" filter="{'id': 'text'}" ng-bind="row.id"></td>
          <td sortable="'transfer.counterparty.bic'" filter="{'counterparty.bic': 'text'}" ng-bind="row.transfer.counterparty.bic"></td>
          <td sortable="'transfer.counterparty.account'" filter="{'counterparty.account': 'text'}" ng-bind="row.transfer.counterparty.account"></td>
          <td sortable="'transfer.amount'" filter="{'transfer.amount': 'text'}" ng-bind="row.transfer.amount"></td>
          <td sortable="'transfer.currency'" filter="{'transfer.currency': 'text'}" ng-bind="row.transfer.currency"></td>
          <td sortable="'transfer.type'" filter="{'transfer.type': 'text'}" ng-bind="row.transfer.type"></td>
          <td sortable="'time'" filter="{'time': 'text'}" ng-bind="row.time"></td>
          <td sortable="'status'" filter="{'status': 'text'}" ng-bind="row.status"></td>
          <td sortable="'accountState.amount'" filter="{'accountState.amount': 'number'}" ng-bind="row.accountState.amount"></td>
          <td sortable="'accountState.currency'" filter="{'accountState.currency': 'text'}" ng-bind="row.accountState.currency"></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<footer-component></footer-component>
